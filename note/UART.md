串口异步通信

一个码元宽度的下降沿 作为同心同步的开始




      ￣|__ [5 - 8 位 数据位] ￣|__    --->一帧数据


定时器 T1 作为穿行通信 波特率 发生器

码元 的跨度 是由 T1决定的 

(只要有串行口， T1 就被 用做 波特率发生器)




SBUF (99H)  特殊功能寄存器

接收到完成的 一帧 数据后， R1 置 1， R1 置1 后， 可以 查SBUF，然后将 数据 发送到 CPU



[一个 码元分成16 份， 只检查其中的 7 8 9 ，是高电平 还是低电平]



波特率:
1 方式1 3 波特率时可变的, 由定时器T1的 溢出率 (T1 每秒 溢出 的次数) 来确定 的

串行口 每秒发送 (或接收)的位数 成为波特率 ; 发送一位所需要的时间为 T ,则波特率 为 1/T;


// foc/12 是机器周期 foc = 12Mhz = 1000000 Hz ; 单片机每执行一条 程序的时间大约是 1us = 0.000001 s ;如果 x=1, 那么每一个 MHZ 都会执行溢出， 每一秒会溢出 1M次 == 1000000
// 256 是因为 T1 的方式处于 2, 八位自动重载, 所以是 2^8  = 256
溢出率 = (foc / 12) /(256 - X)  

然而 
波特率  = (2^SMOD )/32 * 溢出率 // SOMD 是波特率加倍 

所以
波特率 = [ (2^SMOD ) / 32 ] * [foc / (12 * ( 256 - x)) ]

若 
波特率 = 9600
x = 3

TH1 = 0xFD


